<div class="ui massive menu icon  blue inverted">
  <a class="item sidebarToggle"><i class='ui icon bars' id='sidebar-button'></i></a>
  <div class="ui massive header item" *ngIf='currentSession | async as current; else noActiveSession'>{{current.session_id
    }}</div>
  <ng-template #noActiveSession>
    <div class="ui massive header item" *ngIf='openedSession | async as current; else noOpenedSession'>{{current.session_id
    }}</div>
  </ng-template>
  <ng-template #noOpenedSession>
    <div class="ui massive header item">{{selectedSessionId}}</div>
  </ng-template>
</div>
<div class='ui pushable'>
  <div class="ui left blue inline sidebar inverted vertical menu">
    <a class="item ui header sidebarToggle">
      <h1>Меню</h1>
    </a>
    <a class="item ui header sidebarToggle" (click)='openModalArchive()'>
      <h2>Відкрити</h2>
    </a>
    <a class="item ui header sidebarToggle">
      <h2>Створити</h2>
    </a>
    <a class="item ui header sidebarToggle">
      <h2>Експорт</h2>
    </a>
  </div>
  <div class='pusher'>
    <div class='ui container'>
      <form *ngIf="targets | async" class='ui form'>
        <div class='fields'>
          <div class="field four  ui  input disabled">
            <input [(ngModel)]="params.x" [ngModelOptions]="{standalone: true}" pattern="[0-9]{1,4}" type="number"
              placeholder="X">
          </div>
          <div class="field four  ui  input disabled">
            <input [(ngModel)]="params.y" [ngModelOptions]="{standalone: true}" pattern="[0-9]{1,4}" type="number"
              placeholder="Y">
          </div>
          <div class="field four  ui  input disabled">
            <input [(ngModel)]="params.h" [ngModelOptions]="{standalone: true}" pattern="[0-9]{1,4}" type="number"
              placeholder="H">
          </div>
         
          <div class="field four">
            <button class='ui blue button massive' (click)='getCoordinates()'>Отримати координати</button>
          </div>
          <div class="field four">
            <button class='ui blue button massive' (click)='addTarget()'>Додати</button>
          </div>
        </div>
      </form>

      <table *ngIf="targets | async" class='ui blue large table celled stripped'>
        <thead>
          <tr class='center aligned'>
            <th></th>
            <th>
              <h2>#</h2>
            </th>
            <th>
              <h2>X</h2>
            </th>
            <th>
              <h2>Y</h2>
            </th>
            <th>
              <h2>Z</h2>
            </th>
            <th>
              <h2>&#9651;X</h2>
            </th>
            <th>
              <h2>&#9651;Y</h2>
            </th>
            <th>
              <h2>&#9651;Z</h2>
            </th>
            <th>
              <h2>Час</h2>
            </th>
          </tr>

        </thead>
        <tbody>
          <tr class='center aligned' *ngFor='let target of targets | async'>
            <td class="collapsing">
              <!--<div class='ui button massive blue icon'><i class="icon pencil alternate"></i></div>-->
              <div class='ui button massive blue icon' (click)='deleteTarget(target)'><i class="icon trash alternate"></i></div>
            </td>
            <td>
              <h3>{{target.target_id}}</h3>
            </td>
            <td>
              <h3>{{target.X0.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.Y0.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.H0.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.dX.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.dY.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.dH.toFixed(4)}}</h3>
            </td>
            <td>
              <h3>{{target.last_upd | date:'short'}}</h3>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<div class='ui modal notification'>
  <div class="header">Попередження</div>
  <div class='content'>
    <h3 class='ui header'>Активні сесії відсутні. Створіть нову або оберіть сесію з архіву.</h3>
  </div>
  <div class='actions'>
    <a class='ui massive cancel blue button'>Створити нову сесію</a>
    <a class='ui massive ok button'>Відкрити сесію з архіву</a>
  </div>
</div>

<div class='ui modal history'>
  <div class="header">Архів сесій</div>
  <div class='content'>
    <div class="ui fluid selection dropdown input massive">
      <input type="hidden" name="user">
      <i class="dropdown icon"></i>
      <div class="default text">Оберіть Id сесії</div>
      <div class="menu ">
        <ng-container *ngFor='let archiveSession of archiveSessions | async'>
          <div class="item" (click)='selectSessionId(archiveSession.session_id)'>
            <h1>{{archiveSession.session_id}}</h1>
          </div>
        </ng-container>

      </div>

    </div>

  </div>
  <div class="actions">
    <button [disabled]='selectSessionId == undefined' class='ui massive ok blue button' (click)='openSession()'>Підтвердити</button>
  </div>
</div>

<div class='ui modal creator'>
  <div class="header">Створити нову сесію</div>
  <div class='content'>
    <form class='ui form'>
      <div class='fields'>
        <div class="field eight wide ui input massive"><input placeholder='Id сесії'></div>
        <div class="field eight wide ui input massive"><input placeholder='Довірчий інтервал'></div>


      </div>
    </form>
  </div>
  <div class="actions">
    <a class='ui massive ok blue button'>Підтвердити</a>
    <!-- <a class='ui cancel button'>Повернутись</a> -->
  </div>
</div>
<div *ngIf="!isMonitoring">
  <button class='ui button circular blue massive icon play-button' (click)='runMonitoring()'><i class='icon play'></i></button>
</div>
<div *ngIf="isMonitoring">
  <button class='ui button circular blue massive icon play-button' (click)='stopMonitoring()'><i class='icon stop'></i></button>
</div>
